<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Oracle Management &mdash; QSynthesis 0.1 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Types" href="../api/types.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> QSynthesis
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation.html"> Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_usage.html"> API usage</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Plugin Usage</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../plugin/plugin_usage.html">IDA Plugin Walkthrough</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plugin/plugin_usage.html#exploiting-results">Exploiting results</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plugin/plugin_usage.html#debugging">Debugging</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Python API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api/tritonast.html">TritonAst</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/synthesis.html">Top-Down Synthesizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/synthesis.html#placeholder-based-synthesizer">Placeholder-based Synthesizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/table.html">Grammar</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/table.html#oracles">Oracles</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/sym_exec.html">Symbolic Execution utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/types.html">Types</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Advanced Usage</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Lookup table Management</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#qsynthesis-table-manager-utility">qsynthesis-table-manager utility</a></li>
<li class="toctree-l2"><a class="reference internal" href="#table-generation">Table Generation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#oracle-rest-server">Oracle REST server</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">QSynthesis</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a></li>
      <li class="breadcrumb-item active">Oracle Management</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/dev_doc/table.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="oracle-management">
<h1>Oracle Management<a class="headerlink" href="#oracle-management" title="Permalink to this heading"></a></h1>
<section id="qsynthesis-table-manager-utility">
<h2>qsynthesis-table-manager utility<a class="headerlink" href="#qsynthesis-table-manager-utility" title="Permalink to this heading"></a></h2>
<p>The tedious task about using QSynthesis is having good tables (aka oracles)
for efficient synthesis. QSynthesis provides <cite>qsynthesis-table-manager</cite>
which provide high-level function to manage tables. Its help file is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Usage: qsynthesis-table-manager [OPTIONS] COMMAND [ARGS]...

Options:
  --version   Show the version and exit.
  -h, --help  Show this message and exit.

Commands:
  check     Checking the equivalence of hashes against evaluation of...
  compare   Compare two tables
  dump      Dump the content of the table on stdout
  generate  Table generation utility
  info      Getting information of a given database
  merge     Merge entries of the first database in the second
</pre></div>
</div>
<p>The first interesting command is <code class="docutils literal notranslate"><span class="pre">info</span></code> that provides information about the
database, like grammar used, inputs, used, number of entries etc.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">check</span></code> command re-evaluate all expressions against the inputs of table
to ensure the hash is valid. <strong>This is a very slow process</strong> and should only
be used for debugging purposes.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">compare</span></code> command takes two tables and compare them to know how many entries
they have in common thus not in common.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">merge</span></code> command merge two tables as long as they are using the same set of inputs.</p>
</section>
<section id="table-generation">
<h2>Table Generation<a class="headerlink" href="#table-generation" title="Permalink to this heading"></a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">generate</span></code> command of the utility, enables generating new tables. It provides various parameters.
The help message is the following:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Usage: qsynthesis-table-manager generate [OPTIONS] OUTPUT_FILE

  Table generation utility

Options:
  -bs, --bitsize bitsize          Bit size of expressions
  --var-num INTEGER               Number of variables
  --input-num INTEGER             Number of inputs
  --random-level INTEGER          Randomness level of inputs 0 means higlhly
                                  biased to use corner-case values (0,1,-1)

  --op-num INTEGER                Operator number
  -v, --verbosity                 increase output verbosity
  --ops TEXT                      specifying operators to uses
  --inputs TEXT                   specifying input vector to use
  --hash-mode [RAW|FNV1A_128|MD5]
                                  Hash function for keys in table
  --watchdog FLOAT                Activate RAM watchdog (percentage of load
                                  when to stop)

  -c, --cst TEXT                  Constant to add in the generation process
  --linearization                 If set activate linearization of expressions
  -h, --help                      Show this message and exit.
</pre></div>
</div>
<p>The parameters are the following:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">bitsize</span></code>: size of expression to generate. At the moment tables cannot contain expression
of different sizes. <em>(before looking a table the synthesize will ensure expressions are of same size)</em></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">var-num</span></code>: number of variables to include in the grammar</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">input-num</span></code>: Size of the Input vector, on which each expression are evaluated. Too small
vectors might induce false positives, while too long vectors might uselessly be too computation intensive (15 is good)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">random-level</span></code>: Number of random value that will be used as inputs. Low value favor values like (0, 1, -1)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">op-num</span></code>: Unless provided this argument select randomly X operators (among 8 at the moment)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ops</span></code>: takes comma separated operators to use for generation (if not provided they are selected randomly)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">inputs</span></code>: Should be given as a1,b1,c1,a2,b2,c2 where a,b,c are the variable. (a1,b1,c1) is the first input etc.
If not provided inputs are selected randomly using the <code class="docutils literal notranslate"><span class="pre">random-level</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hash-mode</span></code>: Hashing function to apply on output vectors. <strong>(use MD5)</strong></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">watchdog</span></code>: Generation is highly RAM consuming <em>(exponential algorithm)</em>. That enable a watchdog and
the value is the percentage of RAM above which the generation should be stopped.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cst</span></code>: Additional constants to introduce in the generation process.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">linearization</span></code>: enable linearization of expression using sympy</p></li>
</ul>
<p>A very detailed example where all the inputs, ops are defined in advance is the following line:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>qsynthesis-table-manager generate tmp.bin -t bin -bs 64 --var-num 3 --max-depth 5 -k 1 \
--ops SUB,NEG,ADD,XOR,OR --hash-mode MD5 --watchdog 85 --input-num 15 --random-level 7
</pre></div>
</div>
<p>Once generated. If the generation was performed in ‘bin’ (thus <code class="xref py py-class docutils literal notranslate"><span class="pre">LookupTableRaw</span></code>)
files can be imported in a Level-db database with <code class="docutils literal notranslate"><span class="pre">qsynthesis-table-manager</span> <span class="pre">import</span> <span class="pre">table.bin</span> <span class="pre">new_table_ldb</span></code>.</p>
</section>
<section id="oracle-rest-server">
<span id="label-rest-api"></span><h2>Oracle REST server<a class="headerlink" href="#oracle-rest-server" title="Permalink to this heading"></a></h2>
<p>For large oracles it is convenient to serve them on an API instead of having them locally.
The synthesis is slower but more flexible. Qsynthesis provides <code class="docutils literal notranslate"><span class="pre">qsynthesis-table-server</span></code>
allowing to serve Level-DB database via a REST API.</p>
<p>The command is straightforward and takes the table in parameter <em>(and optionally a port)</em> e.g:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>qsynthesis-table-server my_table_leveldb -p 8080
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../api/types.html" class="btn btn-neutral float-left" title="Types" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Quarkslab.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>